## README

Это минимальный http-бэкенд на Go, предназначенный для развертывания на роутерах/виртуальных машинах под управлением OpenWRT (или другой Linux-системой). Приложение слушает endpoint `/api/ping` и возвращает `pong` для GET-запросов — используется для проверки работоспособности и тестирования соединения.

Для примера используется виртуальная машина на адресе: 192.168.1.2

---

### Быстрый старт

#### 1. Сборка приложения

```sh
make build
```

* Скомпилированный бинарник появится в папке `./build`
* По умолчанию сборка идет для Linux/amd64, без CGO.

#### 2. Деплой на устройство

```sh
make deploy RUN_IP=192.168.1.2
```

* Укажите IP-адрес роутера/VM через `RUN_IP`
* Требуется доступ по SSH (root)

#### 3. Запуск приложения на устройстве

```sh
make run RUN_IP=192.168.1.2
```

* Приложение запускается по пути `/app/homemeshnet` на порту `8080`

#### 4. Остановка приложения

```sh
make stop RUN_IP=192.168.1.2
```

* Останавливает процесс по имени

#### 5. Деплой и запуск одной командой

```sh
make deploy-run RUN_IP=192.168.1.2
```

---

### Проверка работы

```sh
curl http://<IP-адрес>:8080/api/ping
# -> pong
```

---

### Основные переменные и пути

* **APP\_NAME** — имя бинарника, по умолчанию `homemeshnet`
* **BUILD\_PATH** — директория сборки (`./build`)
* **REMOTE\_PATH** — директория на устройстве, куда загружается приложение (`/app`)
* **RUN\_IP** — IP устройства, обязательный для deploy/run/stop

---

### Требования

* Go 1.20+ (для сборки)
* Доступ к устройству по SSH (root)
* Linux/amd64 или изменить `GOARCH`/`GOOS` в Makefile

---
